{"project_name":"AVATARIA","version":"1.0","note":"Cada usuario SOLO puede crear UN avatar. Toda la arquitectura, BBDD, app y lógica se ajusta a esta regla. El sistema debe garantizar nivel de modelo de datos, lógica de negocio y UX.","cto_behaviour":{"can_propose_new_features":true,"policy":"El CTO IA puede proponer funcionalidades nuevas y soluciones adicionales NO incluidas originalmente en el roadmap siempre que: (1) respete la visión del producto, (2) mejore claramente la experiencia de usuario, la monetización o la estabilidad técnica, y (3) documente los cambios en el roadmap. El CTO debe explicar brevemente la razón de cada propuesta y siempre pedir confirmación al usuario antes de ejecutar cambios.","block_0_description_global":{"0.1_what_is_this":"Aplicación móvil donde cada usuario crea un ónico avatar con IA (apariencia por prompts), habla con él mediante chat o voz, recibe vídeos generados, y el avatar tiene memoria real a largo plazo. El sistema incluye tienda, cofres, marketplace, regalos, y citas entre avatares de diferentes usuarios.","0.2_main_modules":"A_usuarios_avatar_core":"Gestión de usuario y suavatar, datos, apariencia y perfil.","B_ai_brain":"Chat IA, memoria, voz, vídeo.","C_economy":"Planes, tienda, cofres, marketplace.","D_social_layer":"Buscador, perfilexclusivo, citas entre avatares.","E_admin_security":"Panel admin, seguridad RLS, logs, analítica."},"0.3_system_actors":{"user":"Usa la app móvil. Crea 1 avatar. Chatea. Compra. Vende.","avatar":"Persona IA con memoria, apariencia y personalidad.","admin":"Gestión usuarios, planes, precios, ítems, cofres, marketplace.","automation_system":"Motor que ejecuta fases automático, orquestando CTO y Claude."},"0.4_architecture_overview":{"mobile_app":"React Native + Expo (SDK 54+)","backend":"Node.js + Express + TypeScript","database":"Supabase (Auth, Postgres, Storage, RLS, pgvector)","ai":"OpenAI (chat, embeddings, TTS, STT, image/video)","payments":"Stripe","flow":"Mobile App -> Backend API -> (Supabase / OpenAI / Stripe / Storage)"},"0.5_key_flows":{"registration_and_single_avatar":"Usuario se registra via Supabase Auth. Al entrar, si no tiene avatar, debe crear 1. Ese será su único avatar mientras exista su cuenta o hasta que use un flujo controlado de borrado y recreación.","chat_flow":"User -> mensaje (texto/voz) -> backend -> normalización + contexto (memoria + perfil) -> OpenAI -> respuesta -> guardar en avatar_mensajes, si aplica, avatar_memories -> devuelve a app.","store_purchase_flow":"Usuario selecciona producto/cofre en Store + webhook backend -> verifica inscripción en user_items o user_chests.","cofre_flow":"User -> mensaje (texto/voz) -> backend -> mensajes guardados y si aplica, avatar_memories -> devuelve a app.","marketplace_rules":"Reglas del mercado P2P.","dating_engine":"Motor chat avatar con almacenamiento de mensajes y memoria a largo plazo (embeddings)."},"phases":[{"phase":0,"code":"F0","name":"Visión, modelo de negocio y alcance","goal":"Definir con precisión qué es la app, para quién, cómo gana dinero y qué features entran en la v1.","inputs":["Idea general de 'avatar con memoria infinita'.","Opciones para monetización (suscripciones, tienda, cofres, regalos, marketplace)."],"outputs":["Documento de visión del producto.","Definición de público objetivo.","Modelo de negocio confirmado (planes + micropagos).","Lista de features MVP vs V2."],"tasks":["0.1 Definir propuesta de valor (one-liner + descripción larga App Store).","0.2 Definir público objetivo y principales compradores.","0.3 Crear diseños iniciales (wireframes o mockups).","0.4 Definir roadmap iterativo con fases y entregables.","0.5 Documentar regulaciones y políticas legales relevantes."],"definition_of_done":["Existe un documento (Markdown/JSON) que resume visión, público objetivo, modelo negocio y MVP.","CTO IA puede leer y dar feedback o aprobar el documento.","Roadmap inicial alineado."],"dependencies":[],"ia_guidelines":["El CTO IA puede proponer feedback a la definición si detecta huecos.","El CTO puede proponer mejoras para experiencia y monetización."]}],"phases":[{"phase":"fase 0","status":"in_progress","summary":"Definición y modelado AVATAR, diseñada la app, módulos y actores.","details":"Añadido archivo /osso/osso.json como tarea a crear en esta fase."}],"version":"1.0"}